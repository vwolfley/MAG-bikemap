/*!
*@main_concat.min.js
*@JavaScript document for Bikeways Viewer @ MAG
*@For Production
*@Bikeways-Project - v3.1.0 | 03-27-2015
*@author Vern Wolfley
*/
/*! plugins.js | MAG Bikeways */
!function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}();
/*! config.js | MAG Bikeways */
var appConfig=new function(){this.Version="v3.1.0 | 03/27/2015",this.MainURL="http://geo.azmag.gov/gismag/rest/services/maps/BikeMap_New/MapServer",this.emailLink="https://www.azmag.gov/EmailPages/JasonHoward.asp",this.initExtent={xmin:-12621311,ymin:3879618,xmax:-12327792,ymax:4031727,spatialReference:{wkid:102100}},this.center=[-112.061,33.454]};
/*! main.js | MAG Bikeways */
function openemailwin(){var emailURL=appConfig.emailLink,dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:screen.left,dualScreenTop=void 0!==window.screenTop?window.screenTop:screen.top,w=600,h=660,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,left=width/2-w/2+dualScreenLeft,top=height/2-h/2+dualScreenTop,newWindow=window.open(emailURL,"","resizable=no,location=no,menubar=no,status=no,toolbar=no,fullscreen=no,dependent=no,directories=no,copyhistory=no,scrollbars=no, width="+w+", height="+h+", top="+top+", left="+left);window.focus&&newWindow.focus()}require(["dojo/dom","dojo/dom-construct","dojo/on","dojo/parser","dojo/ready","dojo/query","esri/map","esri/tasks/locator","esri/dijit/BasemapToggle","esri/dijit/HomeButton","esri/InfoTemplate","esri/layers/FeatureLayer","esri/dijit/Popup","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters","esri/dijit/Legend","dijit/form/CheckBox","dojo/_base/array","esri/graphic","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","dojo/_base/Color","dojo/domReady!"],function(dom,dc,on,parser,ready,query,Map,Locator,BasemapToggle,HomeButton,InfoTemplate,FeatureLayer,Popup,ArcGISDynamicMapServiceLayer,ImageParameters,Legend,CheckBox,arrayUtils,Graphic,Point,PictureMarkerSymbol,SimpleFillSymbol,SimpleLineSymbol,SimpleMarkerSymbol,Color){function getLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(zoomToLocation,locationError,{setHighAccuracy:!0})}function locationError(error){switch(error.code){case error.PERMISSION_DENIED:console.log("Location not provided");break;case error.POSITION_UNAVAILABLE:console.log("Current location not available");break;case error.TIMEOUT:console.log("Timeout");break;default:console.log("unknown error")}}function zoomToLocation(location){var pt=esri.geometry.geographicToWebMercator(new Point(location.coords.longitude,location.coords.latitude));map.graphics.add(new Graphic(pt,markerSymbol)),map.centerAndZoom(pt,22)}parser.parse();var map,tocLayers=[],legendLayers=[];ready(function(){var pointSymbol=new SimpleMarkerSymbol("circle",32,null,new Color([0,0,0,.25])),popup=(new SimpleFillSymbol(SimpleFillSymbol.STYLE_SOLID,new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID,new Color([0,0,0,.35]),5),null),new Popup({markerSymbol:pointSymbol,visibleWhenEmpty:!1,hideDelay:-1},dc.create("div")));map=new Map("mapDiv",{basemap:"streets",center:appConfig.center,zoom:1,minZoom:10,maxZoom:19,sliderPosition:"bottom-right",showAttribution:!1,logo:!1,infoWindow:popup});var toggle=new BasemapToggle({map:map,visible:!0,basemap:"satellite"},dc.create("div",{id:"BasemapToggle"},"mapDiv","last"));toggle.startup();var homeButton=new HomeButton({map:map,visible:!0},dc.create("div",{id:"HomeButton"},"mapDiv","after"));homeButton._homeNode.title="Original Extent",homeButton.startup(),on(dom.byId("geolocationButton"),"click",getLocation);var bikewaysParms=new ImageParameters;bikewaysParms.layerIds=[0],bikewaysParms.layerOption=ImageParameters.LAYER_OPTION_SHOW;var content1="<strong>${NAME}</strong><br>${CITY}<br><small>MAGID: ${MAGID}</small>",template1=new InfoTemplate("${PATHTYPE}",content1),bikeways=new ArcGISDynamicMapServiceLayer(appConfig.MainURL,{id:"Bike Paths",visible:!0,opacity:.65,imageParameters:bikewaysParms,outFields:["*"],infoTemplate:template1});bikeways.setInfoTemplates({0:{infoTemplate:template1}}),map.addLayer(bikeways);var content2="<strong>${Discript}</strong><br>${City}<br><small>MAGID: ${MAGID}</small>",template2=new InfoTemplate("Bikeways Crossing",content2),crossings=new FeatureLayer(appConfig.MainURL+"/1",{id:"crossings",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,opacity:.75,outFields:["*"],infoTemplate:template2});map.addLayer(crossings),$("#crossings").click(function(){$(this).is(":checked")?crossings.show():crossings.hide()});var content5="Light Rail Route<br>${CITY}",template5=new InfoTemplate("Light Rail",content5),lightrail=new FeatureLayer(appConfig.MainURL+"/4",{id:"Light Rail",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:template5});map.addLayer(lightrail);var content4="<strong>${Name}</strong><br>${Location}<br>${City}<br><a target='_blank'href=${webLink}>Transit Web Link Info</a>",template4=new InfoTemplate("${Category}",content4),transit=new FeatureLayer(appConfig.MainURL+"/3",{id:"Transit Locations",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:template4});map.addLayer(transit),$("#transit").click(function(){$(this).is(":checked")?(transit.show(),lightrail.show()):(transit.hide(),lightrail.hide())});var content3="<strong>${Name}</strong><br>${Address}<br>${City}<br>Phone: ${Phone}<br><a target='_blank'href=http://${Website}>${Website}</a>",template3=new InfoTemplate("Bike Shop",content3),bikeshops=new FeatureLayer(appConfig.MainURL+"/2",{id:"Bike Shops",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:template3});map.addLayer(bikeshops),$("#bikeshops").click(function(){$(this).is(":checked")?bikeshops.show():bikeshops.hide()});var content6="<strong>${Name}</strong><br><img class='pics' src='img/bikepics/${urlName}.jpg'><br>${Discription}",template6=new InfoTemplate("Bike Route Pictures",content6),bikepics=new FeatureLayer(appConfig.MainURL+"/5",{id:"Bikeways Pics",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:template6});map.addLayer(bikepics);var content8="<strong>${Name}</strong><br><iframe class='youTube' src='${Link}' frameborder='0' allowfullscreen></iframe><br>${Discription}",template8=new InfoTemplate("Bike Route Videos",content8),bikevideos=new FeatureLayer(appConfig.MainURL+"/6",{id:"Bikeways Videos",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:template8});map.addLayer(bikevideos),$("#bikepics").click(function(){$(this).is(":checked")?(bikepics.show(),bikevideos.show()):(bikepics.hide(),bikevideos.hide())});var content7="<strong>${Station_Name}</strong><br>Location: ${Station_Location}<br>Station Number: ${Station_Number}<br><a href='http://www.gridbikes.com/' target='_blank'>www.gridbikes.com</a>",template7=new InfoTemplate("GRID Bike Share",content7),GRID=new FeatureLayer(appConfig.MainURL+"/7",{id:"GRID Bike Share",visible:!1,mode:FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:template7});map.addLayer(GRID),$("#grid").click(function(){$(this).is(":checked")?GRID.show():GRID.hide()});var mpoBoundary=new FeatureLayer(appConfig.MainURL+"/8",{id:"MAG MPO Boundary",visible:!0,mode:FeatureLayer.MODE_ONDEMAND});map.addLayer(mpoBoundary),tocLayers.push({layer:bikeshops,title:"Bike Shops"}),tocLayers.push({layer:bikepics,title:"Bikeways Pics"}),tocLayers.push({layer:crossings,title:"Bike Crossings Types"}),tocLayers.push({layer:transit,title:"Transit Locations"}),tocLayers.push({layer:lightrail,title:"Light Rail"}),tocLayers.push({layer:GRID,title:"GRID Bike Share"}),legendLayers.push({layer:mpoBoundary,title:"MAG MPO Boundary"}),legendLayers.push({layer:GRID,title:"GRID Bike Share"}),legendLayers.push({layer:bikepics,title:"Bikeways Pics"}),legendLayers.push({layer:bikeshops,title:"Bike Shops"}),legendLayers.push({layer:transit,title:"Transit Locations"}),legendLayers.push({layer:lightrail,title:"Light Rail"}),legendLayers.push({layer:crossings,title:"Bikeways Crossings"}),legendLayers.push({layer:bikeways,title:"Bikeways Types"});var legend=new Legend({map:map,layerInfos:legendLayers},"legendDiv");legend.startup(),dom.byId("version").innerHTML=appConfig.Version,map.reposition(),map.resize()});var markerSymbol=new PictureMarkerSymbol({angle:0,xoffset:0,yoffset:0,type:"esriPMS",url:"img/green-pin.png",width:35,height:35});$("#version").html(appConfig.Version)}),$(document).ready(function(){$("#Help").load("views/helpPage.html"),$("#Safety").load("views/safteyPage.html"),$("#OnStreet").load("views/onStreetPage.html"),$("#OnPaths").load("views/onPathsPage.html"),$("#Legend").load("views/legendPage.html"),$("#Legal").load("views/legalPage.html")});