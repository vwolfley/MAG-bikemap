function openemailwin(){var e=appConfig.emailLink,i=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,t=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-300+i,n=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-330+o,a=window.open(e,"","resizable=no,location=no,menubar=no,status=no,toolbar=no,fullscreen=no,dependent=no,directories=no,copyhistory=no,scrollbars=no, width=600, height=660, top="+n+", left="+t);window.focus&&a.focus()}function opensearchwin(){$("#search").is(":hidden")?$("#search").show():$("#search").hide()}!function(){for(var e,i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=i.length,t=window.console=window.console||{};o--;)e=i[o],t[e]||(t[e]=function(){})}();var appConfig=new function(){this.Version="v3.2.1 | 04/27/2017",this.MainURL="https://geo.azmag.gov/gismag/rest/services/maps/BikeMap/MapServer",this.geoCoderService="//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",this.emailLink="https://www.azmag.gov/EmailPages/JasonHoward.asp",this.initExtent={xmin:-12621311,ymin:3879618,xmax:-12327792,ymax:4031727,spatialReference:{wkid:102100}},this.center=[-112.061,33.454]};require(["dojo/dom","dojo/dom-construct","dojo/on","dojo/parser","dojo/ready","dojo/query","esri/map","esri/tasks/locator","esri/dijit/BasemapToggle","esri/dijit/HomeButton","esri/dijit/Search","esri/geometry/Extent","esri/InfoTemplate","esri/layers/FeatureLayer","esri/dijit/Popup","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters","esri/dijit/Legend","dijit/form/CheckBox","dojo/_base/array","esri/graphic","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","dojo/_base/Color","dojo/domReady!"],function(e,i,o,t,n,a,s,r,l,c,d,p,m,h,g,w,u,b,y,f,S,k,E,M,v,D,N){function L(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(O,A,{setHighAccuracy:!0})}function A(e){switch(e.code){case e.PERMISSION_DENIED:console.log("Location not provided");break;case e.POSITION_UNAVAILABLE:console.log("Current location not available");break;case e.TIMEOUT:console.log("Timeout");break;default:console.log("unknown error")}}function O(e){var i=esri.geometry.geographicToWebMercator(new k(e.coords.longitude,e.coords.latitude));T.graphics.add(new S(i,I)),T.centerAndZoom(i,22)}t.parse();var T,C=[],B=[];n(function(){var t=new D("circle",32,null,new N([0,0,0,.25])),n=(new M(M.STYLE_SOLID,new v(v.STYLE_SOLID,new N([0,0,0,.35]),5),null),new g({markerSymbol:t,visibleWhenEmpty:!1,hideDelay:-1},i.create("div")));T=new s("mapDiv",{basemap:"streets",center:appConfig.center,zoom:1,minZoom:10,maxZoom:19,sliderPosition:"bottom-right",showAttribution:!1,logo:!1,infoWindow:n}),new l({map:T,visible:!0,basemap:"satellite"},i.create("div",{id:"BasemapToggle"},"mapDiv","last")).startup();var a=new c({map:T,visible:!0},i.create("div",{id:"HomeButton"},"mapDiv","after"));a._homeNode.title="Original Extent",a.startup();var y=[{locator:new r(appConfig.geoCoderService),singleLineFieldName:"SingleLine",countryCode:"US",autoNavigate:!0,highlightSymbol:new E("https://js.arcgis.com/3.17/esri/dijit/Search/images/search-pointer.png",36,36).setOffset(9,18),enableLabel:!1,enableInfoWindow:!0,showInfoWindowOnSelect:!1,enableHighlight:!0,autoSelect:!1,name:"Address",searchExtent:new p({xmin:-114.68,ymin:31.29,xmax:-109.06,ymax:36.99}),placeholder:"302 N 1st Ave, Phoenix, Arizona"},{featureLayer:new h(appConfig.MainURL+"/6"),searchFields:["NAME"],displayField:"NAME",name:"Bike Shops",outFields:["NAME","ADDRESS","CITY","PHONE","WEBSITE","FACEBOOK"],highlightSymbol:new E("https://js.arcgis.com/3.17/esri/dijit/Search/images/search-pointer.png",36,36).setOffset(9,18),enableLabel:!1,enableInfoWindow:!0,showInfoWindowOnSelect:!1,enableHighlight:!0,placeholder:"Bike Shops"}],f=new d({map:T,sources:[]},"search");f.set("sources",y),f.startup(),$("#search").hide(),o(e.byId("geolocationButton"),"click",L);var S="<strong>${Name}</strong></br>${MPA}</br>${COUNTY} County</br>${MILES:NumberFormat(places:1)} miles",k=new m("USBR90",S),A=new h(appConfig.MainURL+"/3",{id:"USBR90",visible:!1,mode:h.MODE_ONDEMAND,opacity:.65,outFields:["NAME","COUNTY","MPA","MILES"],infoTemplate:k});$("#us90").click(function(){$(this).is(":checked")?A.show():A.hide()});var O=new m("PSBikeway","<strong>${Name}</strong></br>${MPA}</br>${Miles:NumberFormat(places:1)} miles"),I=new h(appConfig.MainURL+"/4",{id:"PSBikeway",visible:!1,mode:h.MODE_ONDEMAND,opacity:.65,outFields:["NAME","MPA","Miles"],infoTemplate:O});$("#psbikeway").click(function(){$(this).is(":checked")?I.show():I.hide()});var P=new u;P.layerIds=[0,1,2],P.layerOption=u.LAYER_OPTION_SHOW;var R=new m("${PATHTYPE}","<strong>${NAME}</strong><br>${CITY}<br><small>MAGID: ${MAGID}</small>"),_=new w(appConfig.MainURL,{id:"Bike Paths",visible:!0,opacity:.75,imageParameters:P,outFields:["NAME","CITY","MAGID","PATHTYPE"],infoTemplate:R});_.setInfoTemplates({0:{infoTemplate:R},1:{infoTemplate:R},2:{infoTemplate:R}});var F=new m("Bikeways Crossing","<strong>${Discript}</strong><br>${City}<br><small>MAGID: ${MAGID}</small>"),U=new h(appConfig.MainURL+"/5",{id:"crossings",visible:!1,mode:h.MODE_ONDEMAND,opacity:.75,outFields:["Discript","City","MAGID"],infoTemplate:F});$("#crossings").click(function(){$(this).is(":checked")?U.show():U.hide()});var j=new m("Light Rail","Light Rail Route</br>${Route}</br>${City}"),x=new h(appConfig.MainURL+"/8",{id:"Light Rail",visible:!0,mode:h.MODE_ONDEMAND,outFields:["Route","City"],infoTemplate:j}),H=new m("${Category}","<strong>${Name}</strong><br>${Location}<br>${City}<br><a target='_blank'href=${webLink}>Transit Web Link Info</a>"),W=new h(appConfig.MainURL+"/7",{id:"Transit Locations",visible:!0,mode:h.MODE_ONDEMAND,outFields:["NAME","Location","City","webLink","Category"],infoTemplate:H});$("#transit").prop("checked",!0),$("#transit").click(function(){$(this).is(":checked")?(W.show(),x.show()):(W.hide(),x.hide())});var G=new m("Bike Shop","<strong>${NAME}</strong><br>${ADDRESS}<br>${City}<br>${PHONE}<br><a target='_blank'href=https://${WEBSITE}>${WEBSITE}</a></br><a target='blank' href=https://${FACEBOOK}>Facebook</a>"),Y=new h(appConfig.MainURL+"/6",{id:"Bike Shops",visible:!1,mode:h.MODE_ONDEMAND,outFields:["NAME","ADDRESS","CITY","PHONE","WEBSITE","FACEBOOK"],infoTemplate:G});$("#bikeshops").click(function(){$(this).is(":checked")?Y.show():Y.hide()});var z=new m("Bike Route Pictures","<strong>${Name}</strong><br><img class='pics' src='img/bikepics/${urlName}.jpg'><br>${Discription}"),V=new h(appConfig.MainURL+"/9",{id:"Bikeways Pics",visible:!1,mode:h.MODE_ONDEMAND,outFields:["Name","urlName"],infoTemplate:z}),k=new m("Bike Route Videos",S="<strong>${Name}</strong><br><iframe class='youTube' src='${Link}' frameborder='0' allowfullscreen></iframe><br>${Discription}"),K=new h(appConfig.MainURL+"/10",{id:"Bikeways Videos",visible:!1,mode:h.MODE_ONDEMAND,outFields:["Name","Discription","Link"],infoTemplate:k});$("#bikepics").click(function(){$(this).is(":checked")?(V.show(),K.show()):(V.hide(),K.hide())});var Z=new m("GRID Bike Share","<strong>${Station_Name}</strong><br>Location: ${Station_Location}<br>Station Number: ${Station_Number}<br><a href='https://www.gridbikes.com/' target='_blank'>www.gridbikes.com</a>"),q=new h(appConfig.MainURL+"/11",{id:"GRID Bike Share",visible:!1,mode:h.MODE_ONDEMAND,outFields:["Station_Name","Station_Location","Station_Number"],infoTemplate:Z});$("#grid").click(function(){$(this).is(":checked")?q.show():q.hide()});var J=new h(appConfig.MainURL+"/12",{id:"MAG MPO Boundary",visible:!0,mode:h.MODE_ONDEMAND});T.addLayers([I,A,_,U,x,W,Y,V,K,q,J]),C.push({layer:Y,title:"Bike Shops"}),C.push({layer:V,title:"Bikeways Pics"}),C.push({layer:U,title:"Bike Crossings Types"}),C.push({layer:W,title:"Transit Locations"}),C.push({layer:x,title:"Light Rail"}),C.push({layer:q,title:"GRID Bike Share"}),C.push({layer:A,title:"US Bike Route 90"}),C.push({layer:I,title:"Phoenix Sonoran Bikeway"}),B.push({layer:J,title:"MAG MPO Boundary"}),B.push({layer:q,title:"GRID Bike Share"}),B.push({layer:V,title:"Bikeways Pics"}),B.push({layer:Y,title:"Bike Shops"}),B.push({layer:W,title:"Transit Locations"}),B.push({layer:x,title:"Light Rail"}),B.push({layer:U,title:"Bikeways Crossings"}),B.push({layer:I,title:"Phoenix Sonoran Bikeway"}),B.push({layer:A,title:"US Bike Route 90"}),B.push({layer:_,title:"Bikeways Types"}),new b({map:T,layerInfos:B},"legendDiv").startup(),e.byId("version").innerHTML=appConfig.Version,T.reposition(),T.resize()});var I=new E({angle:0,xoffset:0,yoffset:0,type:"esriPMS",url:"img/green-pin.png",width:35,height:35});$("#version").html(appConfig.Version)}),$(document).ready(function(){$("#Info").load("views/infoPage.html"),$("#Safety").load("views/safteyPage.html"),$("#OnStreet").load("views/onStreetPage.html"),$("#OnPaths").load("views/onPathsPage.html"),$("#Legend").load("views/legendPage.html"),$("#Legal").load("views/legalPage.html"),$("#Help").load("views/helpPage.html")});